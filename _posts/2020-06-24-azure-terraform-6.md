---
layout: post
title: Azure - Terraform #6
date: 2020-06-24 13:00
author: beierca
comments: true
categories: [Automation, az login, Azure, IaC, Management, Powershell, Terraform, ubuntu, vm]
---
<p>Hi there</p><p>in this post I'm covering Azure &amp; Terraform series today I'm continuing to use the previous <a href="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/5/vars.tf.txt" target="_blank" rel="noopener">vars.tf</a> file which we used to declare all variables for our main.tf file to standardize our Azure through Terraform scripts.</p><p>Before we continue check your Terraform version running <strong>terraform --versionÂ </strong></p><p><strong>Quick review</strong></p><ol><li>download Terraform from <a href="https://www.terraform.io/downloads.html" target="_blank" rel="noopener">https://www.terraform.io/downloads.html</a></li><li>edit your Windows PATH variable to point to your terraform main folder (I have a main folder for Azure deployments with a folder on C:\TERRAFORM\ where I extract my Terraform downloaded file into)</li><li>quick commands<ol><li>az login</li><li>terraform init</li><li>terraform plan -out myplanName</li><li>terraform apply myplanName</li><li>follow up your console output to check for any warnings, errors and its deployment</li><li>terraform destroy</li></ol></li></ol><p><strong>Now you're ready to continue</strong></p><p>download <a href="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/6/main.tf" target="_blank" rel="noopener">main.tf</a> for this exercise</p><p><em><strong>changes for this exercise</strong></em></p><ul><li>removed variable "admin_password" from vars.tf file</li><li>declared data and output variables to capture:<ul><li>the vm public ip address</li><li>admin user name (case sensitve)</li><li>admin password (randomly generated on main.tf)</li><li>OK SKU</li></ul></li></ul><p>This main.tf will create the following using variables from <a href="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/6/vars.tf" target="_blank" rel="noopener">vars.tf</a></p><ol><li>azure resource group named <strong>MyTerraform6</strong></li><li>region (location): <strong>eastus</strong></li><li>azure VNET named <strong>myTFVnet</strong></li><li>azure subnet #1 named <strong>myTFSubnet</strong></li><li>azure ubuntu vm 1804 LTS named myTFVM</li><li>azure public ip for the ubuntu vm named myTFPublicIP</li><li>azure nsg with firewall rule allowing ssh tcp port 22 to the vm through its public ip named myTFNSG</li><li>vm admin user named: adminuser</li><li>random vm password: ******</li><li>prefix for all variables replacing the <strong>my*azure resource identifier*</strong> , where all azure resources to be created under MyTerraform6 azure resource group.</li></ol><p><img style="max-width:100%;" src="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/6/Screenshot_39.png" /></p><p><img style="max-width:100%;" src="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/6/Screenshot_40.png" /></p><p><img style="max-width:100%;" src="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/6/Screenshot_41.png" /></p><p><img style="max-width:100%;" src="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/6/Screenshot_54.png" /></p><p><img style="max-width:100%;" src="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/6/Screenshot_55.png" /></p><p><img style="max-width:100%;" src="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/6/Screenshot_56.png" /></p><p>&nbsp;</p><p>admin_password = i46iE:yr-GqYy_!#<br />admin_user = Adminuser<br />os_sku = 18.04-LTS<br />public_ip_address = 40.87.107.232</p><p><img style="max-width:100%;" src="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/6/Screenshot_57.png" /></p><p><img style="max-width:100%;" src="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/6/Screenshot_58.png" /></p><p><img style="max-width:100%;" src="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/6/Screenshot_59.png" /></p><p><img style="max-width:100%;" src="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/6/Screenshot_60.png" /></p><p><a href="https://thiagobeier.wordpress.com/2020/06/11/azure-terraform-5/" target="_blank" rel="noopener">Previous</a> Article</p><p><strong><span style="color:#ff0000;">Check my <a style="color:#ff0000;" href="https://github.com/thiagobeier/scripts/blob/master/README.md"><span style="color:#0000ff;">Github</span></a> repository</span></strong></p><p><strong>References</strong><br />https://learn.hashicorp.com/terraform/azure/variables_az<br /><br /></p><p><!-- /wp:paragraph -->

<!-- wp:paragraph --></p><p>Thanks,</p><p><!-- /wp:paragraph -->

<!-- wp:paragraph --></p><p>Thiago Beier<br /><a href="https://twitter.com/thiagobeier"><img title="Twitter" src="https://socialmediawidgets.files.wordpress.com/2014/03/twitter1.png" alt="Twitter" width="35" height="35" /></a><a href="https://www.linkedin.com/in/tbeier/"><img title="LinkedIn" src="https://socialmediawidgets.files.wordpress.com/2014/03/linkedin1.png" alt="LinkedIn" width="35" height="35" /></a><a href="https://www.facebook.com/TheBeier/"><img title="Facebook" src="https://socialmediawidgets.files.wordpress.com/2014/03/facebook1.png" alt="Facebook" width="35" height="35" /></a><a href="https://thiagobeier.wordpress.com/feed/"><img title="RSS" src="https://socialmediawidgets.files.wordpress.com/2014/03/rss1.png" alt="RSS" width="35" height="35" /></a></p><p><!-- /wp:paragraph --></p>
