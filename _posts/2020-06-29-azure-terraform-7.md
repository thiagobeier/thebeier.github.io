---
layout: post
title: Azure - Terraform #7
date: 2020-06-29 13:00
author: beierca
comments: true
categories: [.tfvars, Automation, Azure, IaC, main.tf, Management, Powershell, Terraform, ubuntu, vars.tf, vm]
---
<p><!-- wp:paragraph --></p><p style="text-align:justify;">Hi there</p><p style="text-align:justify;">In this post I'm covering, actually adding one more component to previous article <a href="https://thiagobeier.wordpress.com/2020/06/11/azure-terraform-5/" target="_blank" rel="noopener">Azure Terraform #5</a> - The Variable Definitions (.tfvars) Files.</p><p style="text-align:justify;">Those .tfvars files are used when you need to set a lots of variables on vars.tf and you need to specify their values in a variable definitions file terminated by .tfvars or .tfvars.json and then you specify the file on the command: <em><strong>terraform apply -var=teraform.tfvars</strong></em> or simply <em><strong>terraform apply</strong></em></p><p style="text-align:justify;">It's common to use this file when you have an environment where you create the automation however you don't have access to admin users name, passwords, subscription id or any other information that regards to client's environment that's a classified information.</p><ol style="text-align:justify;"><li>you create your main.tf with your azure deployment request<ol><li>azure resource group</li><li>vnet</li><li>vm</li><li>public ip</li><li>NSG and so on and so forth</li></ol></li><li>you create your <a href="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/7/vars.tf" target="_blank" rel="noopener">vars.tf</a> with all variables needed by the <a href="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/7/main.tf" target="_blank" rel="noopener">main.tf</a> file<ol><li>azure resource group name</li><li><strong>azure subscription id</strong></li><li><strong>azure vm admin</strong></li><li><strong>azure vm admin password</strong></li><li><strong>azure prefix</strong></li><li>azure vm name</li><li>azure vnet name (you can also specify ip addressing if needed) but those requests can differ from environment to environment as well as from client to client (use this as master template and make all changes you might need)</li><li>azure public ip</li><li>azure NSG name</li></ol></li><li>you create your private.tfvars file (<a href="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/7/terraform.tfvars" target="_blank" rel="noopener">terraform.tfvars</a>) where you have your classified information</li></ol><p><strong>Quick review</strong></p><ol><li>download Terraform from <a href="https://www.terraform.io/downloads.html" target="_blank" rel="noopener">https://www.terraform.io/downloads.html</a></li><li>edit your Windows PATH variable to point to your terraform main folder (I have a main folder for Azure deployments with a folder on C:\TERRAFORM\ where I extract my Terraform downloaded file into)</li><li>quick commands<ol><li>az login</li><li>terraform init</li><li>terraform plan -out myplanName</li><li>terraform apply myplanName</li><li>follow up your console output to check for any warnings, errors and its deployment</li><li>terraform destroy</li></ol></li></ol><p style="text-align:justify;">Having the Terraform files' structure above you're able to get any request for spin up vms for production, uat or dev environment without any issue and if you need help with the files you just need to share main.tf and vars.tf (public files) and keep your .tfvars file safe (private).</p><p><img style="max-width:100%;" src="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/7/Screenshot_39.png" /></p><p><img style="max-width:100%;" src="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/7/Screenshot_40.png" /></p><p><img style="max-width:100%;" src="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/7/Screenshot_41.png" /></p><p><img style="max-width:100%;" src="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/7/Screenshot_54.png" /></p><p><img style="max-width:100%;" src="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/7/Screenshot_55.png" /></p><p><img style="max-width:100%;" src="https://thiagobeierblog.blob.core.windows.net/posts/azure/terraform/7/Screenshot_56.png" /></p><p><strong><span style="color:#ff0000;">Check my <a style="color:#ff0000;" href="https://github.com/thiagobeier/scripts/blob/master/README.md"><span style="color:#0000ff;">Github</span></a> repository</span></strong></p><p><strong>References</strong><br /><a href="https://www.terraform.io/docs/configuration/variables.html" target="_blank" rel="noopener">https://www.terraform.io/docs/configuration/variables.html</a></p><p><!-- /wp:paragraph -->

<!-- wp:paragraph --></p><p>Thanks,</p><p><!-- /wp:paragraph -->

<!-- wp:paragraph --></p><p>Thiago Beier<br /><a href="https://twitter.com/thiagobeier"><img title="Twitter" src="https://socialmediawidgets.files.wordpress.com/2014/03/twitter1.png" alt="Twitter" width="35" height="35" /></a><a href="https://www.linkedin.com/in/tbeier/"><img title="LinkedIn" src="https://socialmediawidgets.files.wordpress.com/2014/03/linkedin1.png" alt="LinkedIn" width="35" height="35" /></a><a href="https://www.facebook.com/TheBeier/"><img title="Facebook" src="https://socialmediawidgets.files.wordpress.com/2014/03/facebook1.png" alt="Facebook" width="35" height="35" /></a><a href="https://thiagobeier.wordpress.com/feed/"><img title="RSS" src="https://socialmediawidgets.files.wordpress.com/2014/03/rss1.png" alt="RSS" width="35" height="35" /></a></p><p>&nbsp;</p><!-- /wp:paragraph -->
